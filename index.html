<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Official Placement | Black White School</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #000; --accent: #d32f2f; --bg: #f8f9fa; --white: #fff; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        body { background: var(--bg); color: #222; }
        .navbar { background: var(--white); padding: 15px 5%; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .logo { font-family: 'Montserrat', sans-serif; font-weight: 800; font-size: 1.2rem; }
        .logo span { color: var(--accent); }
        .hero { background: var(--primary); color: var(--white); padding: 40px 20px; text-align: center; }
        .timer-box { position: fixed; top: 80px; right: 20px; background: var(--accent); color: white; padding: 10px 20px; border-radius: 50px; font-weight: 800; z-index: 100; box-shadow: 0 4px 15px rgba(211,47,47,0.4); display: none; }
        .container { max-width: 850px; margin: -30px auto 60px; padding: 0 20px; }
        .card { background: var(--white); padding: 35px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .field { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem; margin-bottom: 20px; }
        .question-item { margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
        .opt-label { padding: 12px; border: 2px solid #eee; border-radius: 8px; cursor: pointer; display: flex; align-items: center; margin-bottom: 8px; transition: 0.2s; }
        .opt-label:hover { border-color: var(--accent); background: #fffafa; }
        .btn { padding: 18px; border-radius: 8px; border: none; font-weight: 800; cursor: pointer; width: 100%; font-size: 1rem; text-transform: uppercase; }
        .btn-primary { background: var(--accent); color: white; }
        .progress-bar { height: 6px; background: #eee; border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: 0.3s; }
    </style>
</head>
<body>

<div class="timer-box" id="timerDisplay">60:00</div>
<nav class="navbar"><div class="logo">BLACK <span>WHITE</span> SCHOOL</div></nav>
<div class="hero"><h1>IELTS Academic Test</h1></div>

<div class="container">
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
    <div class="card">
        <div class="step active" id="step-0">
            <h2 style="margin-bottom:15px;">Student Registration</h2>
            <p style="margin-bottom:25px; color: #666;">Para iniciar o simulado de 40 questões (Padrão IELTS), preencha seus dados abaixo:</p>
            <input type="text" id="stuName" class="field" placeholder="Full Name">
            <input type="tel" id="stuPhone" class="field" placeholder="WhatsApp (DDD + Number)">
            <button class="btn btn-primary" onclick="startIELTS()">START 60-MINUTE TEST</button>
        </div>

        <div id="quiz-content"></div>

        <div class="step" id="step-result">
            <div style="text-align:center">
                <h2>Test Completed!</h2>
                <div style="font-size:4rem; font-weight:800; color:var(--accent); margin:15px 0;" id="band-score">0.0</div>
                <h3 id="ielts-level">Calculating...</h3>
                <a id="wa-link" class="btn btn-primary" style="background:#25D366; text-decoration:none; display:block; margin-top:20px;" target="_blank">SEND TO TEACHER VIA WHATSAPP</a>
            </div>
        </div>
    </div>
</div>

<script>
    // Gerador de questões (Simulando 40 questões para manter o código funcional)
    const questions = [];
    const templates = [
        { q: "The results of the study _______ that climate change is accelerating.", a: ["indicates", "indicate", "indicating", "has indicated"], c: 1 },
        { q: "Choose the synonym for 'ADVANTAGEOUS':", a: ["Harmful", "Beneficial", "Useless", "Crucial"], c: 1 },
        { q: "Hardly _______ the project when the budget was cut.", a: ["we started", "had we started", "did we start", "we have started"], c: 1 },
        { q: "Identify the formal alternative for 'CHECK':", a: ["Look at", "Verify", "Go over", "Find out"], c: 1 }
    ];

    // Criando as 40 questões baseadas nos templates para o simulado
    for(let i=1; i<=40; i++) {
        let t = templates[i % templates.length];
        questions.push({ q: `${i}. ${t.q}`, a: t.a, c: t.c });
    }

    let userAnswers = {};
    let timeLeft = 3600; // 60 minutos
    let timerId;

    function startIELTS() {
        const n = document.getElementById('stuName').value;
        const p = document.getElementById('stuPhone').value;
        if(n.length < 3 || p.length < 8) return alert("Please enter your details.");
        
        document.getElementById('timerDisplay').style.display = 'block';
        startTimer();
        showPage(1);
    }

    function startTimer() {
        timerId = setInterval(() => {
            timeLeft--;
            let mins = Math.floor(timeLeft / 60);
            let secs = timeLeft % 60;
            document.getElementById('timerDisplay').innerText = `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            if(timeLeft <= 0) finalize();
        }, 1000);
    }

    function showPage(p) {
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        const target = document.getElementById('step-' + p);
        if(target) target.classList.add('active');
        document.getElementById('progress').style.width = (p/9 * 100) + '%';
        window.scrollTo(0,0);
    }

    function build() {
        const container = document.getElementById('quiz-content');
        for(let p=0; p<8; p++) { // 8 páginas de 5 questões = 40 total
            const div = document.createElement('div');
            div.className = 'step';
            div.id = 'step-' + (p+1);
            let html = `<h3>Part ${p+1} / 8</h3><br>`;
            for(let i=0; i<5; i++) {
                let idx = (p*5)+i;
                html += `<div class="question-item"><p class="question-text"><b>${questions[idx].q}</b></p>`;
                questions[idx].a.forEach((opt, oI) => {
                    html += `<label class="opt-label"><input type="radio" name="q${idx}" onclick="userAnswers[${idx}]=${oI}"> ${opt}</label>`;
                });
                html += `</div>`;
            }
            let isLast = p === 7;
            html += `<button class="btn btn-primary" onclick="${isLast ? 'finalize()' : 'showPage('+(p+2)+')'}">${isLast ? 'FINISH TEST' : 'NEXT PAGE'}</button>`;
            div.innerHTML = html;
            container.appendChild(div);
        }
    }

    function finalize() {
        clearInterval(timerId);
        let score = 0;
        questions.forEach((q, i) => { if(userAnswers[i] === q.c) score++; });
        
        // Conversão para Banda IELTS 0-9
        let band = ((score / 40) * 9).toFixed(1);
        let level = band >= 7 ? "Advanced (C1/C2)" : band >= 5 ? "Intermediate (B1/B2)" : "Beginner (A1/A2)";
        
        const name = document.getElementById('stuName').value;
        document.getElementById('band-score').innerText = band;
        document.getElementById('ielts-level').innerText = level;
        
        const text = encodeURIComponent(`*IELTS PLACEMENT TEST*\n*Aluno:* ${name}\n*Acertos:* ${score}/40\n*Band Score:* ${band}\n*Nível:* ${level}`);
        document.getElementById('wa-link').href = `https://wa.me/5519991717549?text=${text}`;
        
        showPage('result');
    }

    window.onload = build;
</script>
</body>
</html>
